{% extends 'base.html' %}
{% block title %}Корзина{% endblock %}

{% block content %}
<h2>Корзина</h2>

{% if items %}
<table style="width:100%; border-collapse:collapse;">
  <thead>
    <tr style="text-align:left; border-bottom:1px solid #ddd;">
      <th>Товар</th><th>Цена</th><th>Кол-во</th><th>Сумма</th><th></th>
    </tr>
  </thead>
  <tbody>
    {% for it in items %}
    <tr>
      <td>{{ it.product.name }}</td>
      <td>{{ it.product.price }}</td>
      <td>{{ it.quantity }}</td>
      <td>{{ it.get_total_price }}</td>
      <td>
        <form method="post" action="{% url 'orders:remove_from_cart' it.id %}">
          {% csrf_token %}
          <button type="submit">Удалить</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<p><strong>Итого:</strong> {{ total }}</p>

<form method="get" action="{% url 'orders:checkout' %}">
  <button type="submit">Оформить заказ</button>
</form>

{% else %}
  <p>Корзина пуста.</p>
{% endif %}
{% endblock %}
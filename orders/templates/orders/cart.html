{% extends 'base.html' %}
{% block title %}Корзина{% endblock %}

{% block content %}
<h2>Корзина</h2>

{% if items %}
<table style="width:100%; border-collapse:collapse;">
  <thead>
    <tr style="text-align:left; border-bottom:1px solid #ddd;">
      <th>Товар</th>
      <th>Цена</th>
      <th>Кол-во</th>
      <th>Сумма</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {% for it in items %}
    <tr style="border-bottom:1px solid #eee;">
      <td style="padding:8px 0;">{{ it.product.name }}</td>
      <td style="padding:8px 0;">{{ it.product.price }} ₽</td>
      <td style="padding:8px 0;">{{ it.quantity }}</td>
      <td style="padding:8px 0;">{{ it.get_total_price }} ₽</td>
      <td style="padding:8px 0;">
        <form method="post" action="{% url 'orders:remove_from_cart' it.id %}" style="margin:0;">
          {% csrf_token %}
          <button type="submit"
            style="padding:8px 12px; background:#28a745; color:white;
                   border:none; border-radius:6px; cursor:pointer;">
            Удалить
          </button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<p style="margin-top:20px; font-size:1.1rem;">
  <strong>Итого:</strong> {{ total }} ₽
</p>

<form method="get" action="{% url 'orders:checkout' %}">
  <button type="submit"
    style="padding:10px 16px; background:#28a745; color:white;
           border:none; border-radius:6px; cursor:pointer; font-size:1rem;">
    Оформить заказ
  </button>
</form>

{% else %}
  <p>Корзина пуста.</p>
{% endif %}
{% endblock %}
